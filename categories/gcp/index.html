<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>Category: gcp - MA Jian&#39;s Blog</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">




<meta name="description" content="A developer's blog">



<meta name="keywords" content="development">








<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">


<link rel="stylesheet" href="/blog/css/style.css">


<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>



<meta name="generator" content="Hexo 6.3.0"></head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/blog/">
                
                <img src="/blog/images/logo.png" alt="" height="28">
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-end">
            
            
            
        </div>
    </div>
</nav>

    <section class="section section-heading">
    <div class="container">
        <div class="content">
            <h5><i class="far fa-folder"></i>gcp</h5>
        </div>
    </div>
</section>
<section class="section">
    <div class="container">
    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/blog/2022/12/21/d02-Cloud-Functions/" itemprop="url">d02-Cloud Functions</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2022-12-21T15:28:13.000Z" itemprop="datePublished">Dec 21 2022</time>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/blog/categories/gcp/">gcp</a><span>></span><a class="article-category-link" href="/blog/categories/gcp/d-practice/">d-practice</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            a minute read (About 127 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <html><head></head><body><h1 id="Functions-framework"><a href="#Functions-framework" class="headerlink" title="Functions-framework"></a>Functions-framework</h1><p>Functions framework helps in setting up the environment for testing of cloud functions locally<br>Here is an example</p>
<h3 id="installation"><a href="#installation" class="headerlink" title="installation"></a>installation</h3><figure class="highlight python hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install functions-framework</span><br></pre></td></tr></tbody></table></figure>
<p>code example:</p>
<p>create a new project and install functions-framework as above, and then create a new python file <strong>main.py</strong></p>
<figure class="highlight python hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">def</span> <span class="title function_">multiply</span>(<span class="hljs-params">request</span>):</span><br><span class="line">    request_json = request.get_json()</span><br><span class="line">    num_1 = request_json[<span class="hljs-string">"num_1"</span>]</span><br><span class="line">    num_2 = request_json[<span class="hljs-string">"num_2"</span>]</span><br><span class="line">    result = num_1 * num_2</span><br><span class="line">    <span class="hljs-keyword">return</span> (<span class="hljs-string">f"The multiplication result is <span class="hljs-subst">{result}</span>"</span>, <span class="hljs-number">200</span>)</span><br></pre></td></tr></tbody></table></figure>

<p>run the function on local:</p>
<figure class="highlight plaintext hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">functions-framework --port 8080 --target multiply --signature-type http --source main.py --debug</span><br></pre></td></tr></tbody></table></figure>
<p>Test the function<br>use another terminal and enter the curl command:</p>
<figure class="highlight plaintext hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -X POST \</span><br><span class="line">-H "Content-type:application/json" \</span><br><span class="line">-d  '{"num_1":20, "num_2": 30}' \</span><br><span class="line">-w '\n' \</span><br><span class="line">http://localhost:8080</span><br></pre></td></tr></tbody></table></figure>
<p>Response in this new terminal:</p>
<img src="/blog/2022/12/21/d02-Cloud-Functions/response.png" class="" title="response"></body></html>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/blog/2022/09/15/d01-Logs-Router/" itemprop="url">d01-Logs Router</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2022-09-15T09:19:11.000Z" itemprop="datePublished">Sep 15 2022</time>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/blog/categories/gcp/">gcp</a><span>></span><a class="article-category-link" href="/blog/categories/gcp/d-practice/">d-practice</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            a few seconds read (About 0 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/blog/2021/05/28/gcp-c01-vpc/" itemprop="url">gcp-c01-vpc</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2021-05-28T11:24:24.000Z" itemprop="datePublished">May 28 2021</time>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/blog/categories/gcp/">gcp</a><span>></span><a class="article-category-link" href="/blog/categories/gcp/c-data-architect/">c-data-architect</a><span>></span><a class="article-category-link" href="/blog/categories/gcp/c-data-architect/infrastructure-foundation/">infrastructure-foundation</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            a minute read (About 187 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <html><head></head><body><h2 id="4-ways-to-interact-with-GCP"><a href="#4-ways-to-interact-with-GCP" class="headerlink" title="4 ways to interact with GCP"></a>4 ways to interact with GCP</h2><img src="/blog/2021/05/28/gcp-c01-vpc/4_ways_to_interact_with_gcp.png" class="" title="4_ways_to_interact_with_gcp">

<h2 id="Projects-and-networks"><a href="#Projects-and-networks" class="headerlink" title="Projects and networks"></a>Projects and networks</h2><h3 id="Project"><a href="#Project" class="headerlink" title="Project"></a>Project</h3><ul>
<li>Associate objects and services with billing</li>
<li>Contain networks(5 by default) that can be shared/peered</li>
</ul>
<h3 id="Network"><a href="#Network" class="headerlink" title="Network"></a>Network</h3><ul>
<li>Has no IP address range</li>
<li>Is global and spans all available regions</li>
<li>Contains subnetworks</li>
<li>Is available as default, auto or custom</li>
</ul>
<h2 id="3-VPC-network-types"><a href="#3-VPC-network-types" class="headerlink" title="3 VPC network types"></a>3 VPC network types</h2><img src="/blog/2021/05/28/gcp-c01-vpc/3_vpc_network_types.png" class="" title="3_vpc_network_types">

<p>The projects can communicate over internal IPs when they are in the same network even though they are in different regions.<br>They can not communicate over internal IPs when they are in different networks even though they are in the same region</p>
<h2 id="Subnetworks-cross-zones"><a href="#Subnetworks-cross-zones" class="headerlink" title="Subnetworks cross zones"></a>Subnetworks cross zones</h2><ul>
<li>VMs can be on the same subnet but in different zones</li>
<li>A single firewall rule can apply to both VMs</li>
</ul>
<h2 id="Expand-subnets"><a href="#Expand-subnets" class="headerlink" title="Expand subnets"></a>Expand subnets</h2><ul>
<li>Cannot overlap with other subnets</li>
<li>Can expand but not shrink</li>
<li>Avoid large subnets</li>
</ul>
<h2 id="Internal-and-External-Ip-address"><a href="#Internal-and-External-Ip-address" class="headerlink" title="Internal and External Ip address"></a>Internal and External Ip address</h2><img src="/blog/2021/05/28/gcp-c01-vpc/internal_external_ip_address.png" class="" title="internal_external_ip_address">

<p>Every VM need an internal ip address but the external ip address is optional and by default it is ephemeral</p>
</body></html>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/blog/2021/03/26/b09-01-BigQuery-Load-From-Json/" itemprop="url">b09-01-BigQuery Load From Json</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2021-03-26T14:01:27.000Z" itemprop="datePublished">Mar 26 2021</time>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/blog/categories/gcp/">gcp</a><span>></span><a class="article-category-link" href="/blog/categories/gcp/b-data-engineer/">b-data-engineer</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            a few seconds read (About 68 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <html><head></head><body><h2 id="How-to-copy-dataset-between-different-projects-in-BigQuery"><a href="#How-to-copy-dataset-between-different-projects-in-BigQuery" class="headerlink" title="How to copy dataset between different projects in BigQuery ?"></a>How to copy dataset between different projects in BigQuery ?</h2><h3 id="1-BigQuery-Data-Transfer-Service"><a href="#1-BigQuery-Data-Transfer-Service" class="headerlink" title="1. BigQuery Data Transfer Service."></a>1. BigQuery Data Transfer Service.</h3><p>This is the simplest solution and with it, we can copy a dataset within a region or from one region to another, without<br>   extracting, moving, and reloading data into BigQuery</p>
<h3 id="2-Copy-manually"><a href="#2-Copy-manually" class="headerlink" title="2. Copy manually"></a>2. Copy manually</h3><p>If our BigQuery Data Transfer Service is not active, we can use another way to copy the table.<br>The steps are as following:   </p>
<p>1. </p>
</body></html>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/blog/2020/10/02/b06-01-Cloud-PubSub-HelloWorld/" itemprop="url">b06-01-Cloud-PubSub-HelloWorld</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2020-10-02T10:59:33.000Z" itemprop="datePublished">Oct 2 2020</time>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/blog/categories/gcp/">gcp</a><span>></span><a class="article-category-link" href="/blog/categories/gcp/b-data-engineer/">b-data-engineer</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            a minute read (About 118 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <html><head></head><body><p>In this article I will show you how to publish and receive messages in PubSub with Java</p>
<ol>
<li><p>create topic</p>
<figure class="highlight scala hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcloud pubsub topics create my-topic</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>create subscription to this topic</p>
<figure class="highlight scala hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcloud pubsub subscriptions create my-sub --topic my-topic</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>git clone project into cloud shell</p>
<figure class="highlight scala hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="hljs-comment">//github.com/googleapis/java-pubsub.git</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>go into the sample</p>
<figure class="highlight scala hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd samples/snippets/</span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>modify PublisherExample.java and SubscribeAsyncExample.java to put the right project id, topic id and subscription id</p>
</li>
<li><p>compile project</p>
<figure class="highlight scala hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn clean install -<span class="hljs-type">DskipTests</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>run subscriber</p>
<figure class="highlight scala hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn exec:java -<span class="hljs-type">Dexec</span>.mainClass=<span class="hljs-string">"pubsub.SubscribeAsyncExample"</span></span><br></pre></td></tr></tbody></table></figure>
</li>
<li><p>run publisher in another screen and observe subscriber</p>
<figure class="highlight scala hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn exec:java -<span class="hljs-type">Dexec</span>.mainClass=<span class="hljs-string">"pubsub.PublisherExample"</span></span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<div class="video-container"><iframe src="https://www.youtube.com/embed/FCUkRvSEo-Y" frameborder="0" loading="lazy" allowfullscreen=""></iframe></div></body></html>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/blog/2020/08/20/GCP-Kubernetes-Manually/" itemprop="url">GCP-Kubernetes-Manually</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2020-08-20T08:11:43.000Z" itemprop="datePublished">Aug 20 2020</time>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/blog/categories/gcp/">gcp</a><span>></span><a class="article-category-link" href="/blog/categories/gcp/kubernetes/">kubernetes</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            a minute read (About 197 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <html><head></head><body><p>In this article, we will show you how to deploy a web application by kubernetes on gcp.</p>
<ol>
<li>run nginx on daemon<figure class="highlight scala hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p <span class="hljs-number">8080</span>:<span class="hljs-number">80</span> nginx:latest</span><br></pre></td></tr></tbody></table></figure></li>
<li>change index.html in nginx container<figure class="highlight scala hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker cp index.html <span class="hljs-number">607</span>de9f58775:/usr/share/nginx/html/</span><br></pre></td></tr></tbody></table></figure></li>
<li>create docker image from the new container version<figure class="highlight scala hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker commit <span class="hljs-number">607</span>de9f58775 daccfrance:version1</span><br></pre></td></tr></tbody></table></figure></li>
<li>create tag of docker image with project id<figure class="highlight scala hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker tag daccfrance:version1 eu.gcr.io/kube-test<span class="hljs-number">-286917</span>/daccfrance:version1</span><br></pre></td></tr></tbody></table></figure></li>
<li>push docker image to gcp container registry<figure class="highlight scala hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker push eu.gcr.io/kube-test<span class="hljs-number">-286917</span>/daccfrance:version1</span><br></pre></td></tr></tbody></table></figure></li>
<li>kill docker container<figure class="highlight scala hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker container kill #container_id</span><br></pre></td></tr></tbody></table></figure></li>
<li>set compute zone by default<figure class="highlight scala hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcloud config set compute/zone europe-west1-b</span><br></pre></td></tr></tbody></table></figure></li>
<li>create a kubernetes cluster<figure class="highlight scala hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcloud container clusters create gk-cluster --num-nodes=<span class="hljs-number">1</span></span><br></pre></td></tr></tbody></table></figure></li>
<li>get authentication credentials for the cluster<figure class="highlight scala hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcloud container clusters get-credentials gk-cluster</span><br></pre></td></tr></tbody></table></figure></li>
<li>create kubernetes deployment<figure class="highlight scala hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl create deployment web-server --image=eu.gcr.io/kube-test<span class="hljs-number">-286917</span>/daccfrance:version1</span><br></pre></td></tr></tbody></table></figure></li>
<li>create kubernetes service<figure class="highlight scala hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl expose deployment web-server --<span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">LoadBalancer</span> <span class="hljs-title">--port</span> 80 <span class="hljs-title">--target-port</span> 80</span></span><br></pre></td></tr></tbody></table></figure></li>
<li>get kubernetes pods<figure class="highlight scala hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get pods</span><br></pre></td></tr></tbody></table></figure></li>
<li>get kubernetes service<figure class="highlight scala hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl get service web-server</span><br></pre></td></tr></tbody></table></figure></li>
</ol>
<div class="video-container"><iframe src="https://www.youtube.com/embed/pksbLIY8PFA" frameborder="0" loading="lazy" allowfullscreen=""></iframe></div></body></html>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/blog/2020/06/16/b10-Machine-Learning/" itemprop="url">b10-Machine Learning</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2020-06-16T09:09:03.000Z" itemprop="datePublished">Jun 16 2020</time>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/blog/categories/gcp/">gcp</a><span>></span><a class="article-category-link" href="/blog/categories/gcp/b-data-engineer/">b-data-engineer</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            2 minutes read (About 243 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <html><head></head><body><h2 id="What-is-Machine-Learning"><a href="#What-is-Machine-Learning" class="headerlink" title="What is Machine Learning ?"></a>What is Machine Learning ?</h2><p>Process of combining inputs to produce useful predictions</p>
<h2 id="How-it-works"><a href="#How-it-works" class="headerlink" title="How it works"></a>How it works</h2><ul>
<li>Train a model with examples(example = input + label)</li>
<li>Training = adjust model to learn relationship between features and labels</li>
<li>Feature = input variables</li>
<li>Inference = apply trained model to unlabeled examples</li>
</ul>
<h2 id="Learning-types"><a href="#Learning-types" class="headerlink" title="Learning types"></a>Learning types</h2><ul>
<li>Supervised learning<ul>
<li>Regression - Continuous, numeric variables</li>
<li>Classification - categorical variables: yes/no</li>
</ul>
</li>
<li>Unsupervised Learning<ul>
<li>Clustering - finding pattern</li>
<li>No labeled or categorized</li>
</ul>
</li>
<li>Reinforcement learning<ul>
<li>Use positive/negative reinforcement to complete a task<ul>
<li>Complete a maze, learn chess</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="Neural-network"><a href="#Neural-network" class="headerlink" title="Neural network"></a>Neural network</h2><ul>
<li>Neural network - model composed of layers, consisting of neurons</li>
<li>Neuron - node, combines input values and create one output value</li>
<li>Feature - input variables used to make predictions</li>
<li>Hidden layer - set of neurons operating from same input set </li>
<li>Feature engineering - deciding which features to use in a model</li>
<li>Epoch - single pass through training dataset </li>
<li>Deep and Wide in neural network<ul>
<li>Wide - memorization: many features</li>
<li>Deep - generalization: many hidden layers</li>
<li>Deep and Wide - both: good for recommendation engines</li>
</ul>
</li>
</ul>
<h2 id="What-is-Overfitting"><a href="#What-is-Overfitting" class="headerlink" title="What is Overfitting?"></a>What is Overfitting?</h2><p>training model ‘overfitted’ to training data - unable to generalize with new data</p>
<h2 id="Cause-of-Overfitting"><a href="#Cause-of-Overfitting" class="headerlink" title="Cause of Overfitting"></a>Cause of Overfitting</h2><ul>
<li>Not enough training data</li>
<li>Too many features</li>
<li>Model fitted to unnecessary features unique to training data: “noise”</li>
</ul>
<h2 id="Solving-of-Overfitting"><a href="#Solving-of-Overfitting" class="headerlink" title="Solving of Overfitting"></a>Solving of Overfitting</h2><ul>
<li>more data</li>
<li>make model less complex</li>
<li>remove “noise”<ul>
<li>increase “regularization” parameters</li>
</ul>
</li>
</ul>
<h2 id="AI-platform"><a href="#AI-platform" class="headerlink" title="AI platform"></a>AI platform</h2><ul>
<li>Fully managed Tensorflow platform</li>
<li>Distributed training and predictions</li>
<li>Hyperparameter tuning with Hypertune</li>
</ul>
<h2 id="How-AI-Platform-works"><a href="#How-AI-Platform-works" class="headerlink" title="How AI Platform works"></a>How AI Platform works</h2><ul>
<li>Master - manages other nodes</li>
<li>Workers - works on portion of training job</li>
<li>Parameter servers - coordinate shared model state between workers</li>
</ul>
</body></html>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/blog/2020/06/12/b09-BigQuery/" itemprop="url">b09-BigQuery</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2020-06-12T06:31:40.000Z" itemprop="datePublished">Jun 12 2020</time>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/blog/categories/gcp/">gcp</a><span>></span><a class="article-category-link" href="/blog/categories/gcp/b-data-engineer/">b-data-engineer</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            a few seconds read (About 67 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <html><head></head><body><h2 id="What-is-BigQuery"><a href="#What-is-BigQuery" class="headerlink" title="What is BigQuery ?"></a>What is BigQuery ?</h2><ul>
<li>Fully Managed Data warehousing<ul>
<li>Near real time analysis of petabyte scale databases</li>
</ul>
</li>
<li>Serverless(no ops)</li>
<li>Auto scaling</li>
<li>Both storage and analysis</li>
<li>Interact with SQL</li>
</ul>
<h2 id="How-BigQuery-works"><a href="#How-BigQuery-works" class="headerlink" title="How BigQuery works"></a>How BigQuery works</h2><ul>
<li>Columnar data store</li>
<li>It does not update exciting records</li>
<li>No transactional</li>
</ul>
<h2 id="Structure"><a href="#Structure" class="headerlink" title="Structure"></a>Structure</h2><ul>
<li>Dataset: contains tables/views</li>
<li>Table: collections of columns</li>
<li>Job: long running action/query</li>
</ul>
<h2 id="IAM"><a href="#IAM" class="headerlink" title="IAM"></a>IAM</h2><ul>
<li>can control by project, dataset, view</li>
<li>cannot control at table level</li>
</ul>
</body></html>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/blog/2020/06/05/b08-Cloud-Dataproc/" itemprop="url">b08-Cloud Dataproc</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2020-06-05T11:16:59.000Z" itemprop="datePublished">Jun 5 2020</time>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/blog/categories/gcp/">gcp</a><span>></span><a class="article-category-link" href="/blog/categories/gcp/b-data-engineer/">b-data-engineer</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            a few seconds read (About 92 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <html><head></head><body><h2 id="Dataproc"><a href="#Dataproc" class="headerlink" title="Dataproc"></a>Dataproc</h2><ul>
<li>Hadoop, Spark, Hive, Pig</li>
<li>Lift and shift to GCP</li>
</ul>
<h2 id="Map-Reduce"><a href="#Map-Reduce" class="headerlink" title="Map Reduce"></a>Map Reduce</h2><img src="/blog/2020/06/05/b08-Cloud-Dataproc/map_reduce.png" class="" title="map_reduce">

<h2 id="Converting-from-HDFS-to-Google-Cloud-Storage"><a href="#Converting-from-HDFS-to-Google-Cloud-Storage" class="headerlink" title="Converting from HDFS to Google Cloud Storage"></a>Converting from HDFS to Google Cloud Storage</h2><ul>
<li>Copy data to GCS<ul>
<li>Install connector or copy manually</li>
</ul>
</li>
<li>Update file prefix in scripts<ul>
<li>From hdfs:// to gs://</li>
</ul>
</li>
<li>Use Dataproc and run against/output to GCS</li>
</ul>
<h2 id="Dataproc-performance-optimization"><a href="#Dataproc-performance-optimization" class="headerlink" title="Dataproc performance optimization"></a>Dataproc performance optimization</h2><ul>
<li>Keep your data close to your cluster<ul>
<li>Place Dataproc cluster in same region as storage bucket</li>
</ul>
</li>
<li>Larger persistent disk = better performance<ul>
<li>Using SSD over HDD</li>
</ul>
</li>
<li>Allocate more VMs<ul>
<li>Use preemptible VM to save on costs<div class="video-container"><iframe src="https://www.youtube.com/embed/lyNiOFsTW18" frameborder="0" loading="lazy" allowfullscreen=""></iframe></div></li>
</ul>
</li>
</ul>
</body></html>
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/blog/2020/05/23/b07-Cloud-Dataflow/" itemprop="url">b07-Cloud Dataflow</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2020-05-23T15:43:39.000Z" itemprop="datePublished">May 23 2020</time>
            
        </span>
        
        <span class="column is-narrow article-category">
            <i class="far fa-folder"></i>
            <a class="article-category-link" href="/blog/categories/gcp/">gcp</a><span>></span><a class="article-category-link" href="/blog/categories/gcp/b-data-engineer/">b-data-engineer</a>
        </span>
        
        
        <span class="column is-narrow">
            
            
            a few seconds read (About 91 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <html><head></head><body><h2 id="Data-Processing"><a href="#Data-Processing" class="headerlink" title="Data Processing"></a>Data Processing</h2><img src="/blog/2020/05/23/b07-Cloud-Dataflow/data_processing_challenge.png" class="" title="data_processing_challenge">

<p>Solution:<br>Apache Beam + Cloud Dataflow</p>
<h2 id="Cloud-Dataflow"><a href="#Cloud-Dataflow" class="headerlink" title="Cloud Dataflow"></a>Cloud Dataflow</h2><ul>
<li>Auto scaling, No-Ops, Stream and Batch Processing</li>
<li>Built on Apache Beam</li>
<li>Pipelines are regional-based</li>
</ul>
<p>Data Transformation</p>
<img src="/blog/2020/05/23/b07-Cloud-Dataflow/data_transformation.png" class="" title="data_transformation">

<h2 id="Cloud-Dataproc-vs-Cloud-Dataflow"><a href="#Cloud-Dataproc-vs-Cloud-Dataflow" class="headerlink" title="Cloud Dataproc vs Cloud Dataflow"></a>Cloud Dataproc vs Cloud Dataflow</h2><img src="/blog/2020/05/23/b07-Cloud-Dataflow/dataproc_vs_dataflow.png" class="" title="dataproc_vs_dataflow">

<h2 id="Key-Terms"><a href="#Key-Terms" class="headerlink" title="Key Terms"></a>Key Terms</h2><ul>
<li>Element : single entry of data (eg. table row)</li>
<li>PCollection: Distributed data set, input and output</li>
<li>Transform: Data processing in pipeline</li>
<li>ParDo: Type of Transform <img src="/blog/2020/05/23/b07-Cloud-Dataflow/pipeline.png" class="" title="pipeline">
<div class="video-container"><iframe src="https://www.youtube.com/embed/XLXe1LHrkho" frameborder="0" loading="lazy" allowfullscreen=""></iframe></div></li>
</ul>
</body></html>
    
    </div>
    
    
</article>




    
    
        
<nav class="pagination is-centered is-rounded" role="navigation" aria-label="pagination">
    <div class="pagination-previous is-invisible is-hidden-mobile">
        <a href="/blog/categories/gcp/page/0/">Prev</a>
    </div>
    <div class="pagination-next">
        <a href="/blog/categories/gcp/page/2/">Next</a>
    </div>
    <ul class="pagination-list is-hidden-mobile">
        
        <li><a class="pagination-link is-current" href="/blog/categories/gcp/">1</a></li>
        
        <li><a class="pagination-link" href="/blog/categories/gcp/page/2/">2</a></li>
        
        <li><a class="pagination-link" href="/blog/categories/gcp/page/3/">3</a></li>
        
    </ul>
</nav>
    
    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2023 MA Jian&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        target="_blank" rel="noopener" href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("en-AU");
</script>




<script src="/blog/js/script.js"></script>


    
</body>
</html>