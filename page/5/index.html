<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Developer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="A developer&#39;s blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Developer">
<meta property="og:url" content="https://sdmj45.github.io/blog/page/5/index.html">
<meta property="og:site_name" content="Developer">
<meta property="og:description" content="A developer&#39;s blog">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="MA Jian">
<meta property="article:tag" content="development">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/blog/atom.xml" title="Developer" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/blog/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/blog/css/style.css">

  
    
<link rel="stylesheet" href="/blog/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">Developer</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/blog/" id="subtitle">Enthussiasm in developing</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://sdmj45.github.io/blog"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-a07-GCP-Developing-Deploying-and-Monitoring" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2020/05/08/a07-GCP-Developing-Deploying-and-Monitoring/" class="article-date">
  <time class="dt-published" datetime="2020-05-08T15:03:40.000Z" itemprop="datePublished">2020-05-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/gcp/">gcp</a>►<a class="article-category-link" href="/blog/categories/gcp/a-core-infrastructure/">a-core-infrastructure</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2020/05/08/a07-GCP-Developing-Deploying-and-Monitoring/">a07-GCP Developing, Deploying and Monitoring</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Cloud-Source-Repositories"><a href="#Cloud-Source-Repositories" class="headerlink" title="Cloud Source Repositories"></a>Cloud Source Repositories</h2><p>Fully featured Git repositories hosted on GCP</p>
<h2 id="Cloud-Functions"><a href="#Cloud-Functions" class="headerlink" title="Cloud Functions"></a>Cloud Functions</h2><ul>
<li>Create single-purpose functions that respond to events without a server or runtime</li>
<li>Written in Js, execute in managed node.js environment on GCP</li>
</ul>
<h2 id="Deployment-Manager"><a href="#Deployment-Manager" class="headerlink" title="Deployment Manager"></a>Deployment Manager</h2><ul>
<li>Provides repeatable deployments</li>
<li>Create a .yaml template describing your environment and use Deployment Manager to create resources</li>
</ul>
<h2 id="Stackdriver"><a href="#Stackdriver" class="headerlink" title="Stackdriver"></a>Stackdriver</h2><p>is GCP’s tool for monitoring, logging and diagnostics</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sdmj45.github.io/blog/2020/05/08/a07-GCP-Developing-Deploying-and-Monitoring/" data-id="cl8yi9iba001n94i4f5joe8if" data-title="a07-GCP Developing, Deploying and Monitoring" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-a06-GCP-Applications" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2020/05/08/a06-GCP-Applications/" class="article-date">
  <time class="dt-published" datetime="2020-05-08T13:21:34.000Z" itemprop="datePublished">2020-05-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/gcp/">gcp</a>►<a class="article-category-link" href="/blog/categories/gcp/a-core-infrastructure/">a-core-infrastructure</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2020/05/08/a06-GCP-Applications/">a06-GCP-Applications</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="App-Engine"><a href="#App-Engine" class="headerlink" title="App Engine"></a>App Engine</h2><p>is a PaaS for building scalable applications</p>
<ul>
<li>it makes deployment, maintenance and scalability easy</li>
<li>suited for building scalable web applications and mobile backends</li>
</ul>
<p>It offers 2 environments:</p>
<ul>
<li><p><strong>standard environment</strong></p>
<ul>
<li>easily deploy applications</li>
<li>autoscale</li>
<li>free daily quota</li>
<li>usage based pricing</li>
<li>Specific versions of Java, Python, PHP and Go are supported</li>
</ul>
<p>Sandbox constraints:</p>
<ul>
<li>No writing to local files</li>
<li>All requests time out at 60s</li>
<li>Limits on third-party software</li>
</ul>
</li>
<li><p><strong>flexible environment</strong></p>
<ul>
<li>Build and deploy containerized apps with a click</li>
<li>No sandbox constraints</li>
<li>Can access App Engine resources</li>
</ul>
</li>
</ul>
<p>Comparing standard and flexible environments</p>
<img src="/blog/2020/05/08/a06-GCP-Applications/standard_vs_flexible.png" class="" title="standard_vs_flexible">
<p>Comparing Kubernetes Engine and App Engine</p>
<img src="/blog/2020/05/08/a06-GCP-Applications/kubernetes_engine_vs_app_engine.png" class="" title="kubernetes_engine_vs_app_engine">

<p>GCP provides 2 API management tools</p>
<h2 id="Cloud-Endpoints"><a href="#Cloud-Endpoints" class="headerlink" title="Cloud Endpoints"></a>Cloud Endpoints</h2><ul>
<li>Control access and validate calls with JSON Web Token and Google API keys<ul>
<li>Identify web, mobile users with Auth0 and Firebase Authentication</li>
</ul>
</li>
<li>Generate client libraries</li>
</ul>
<h2 id="Apigee-Edge"><a href="#Apigee-Edge" class="headerlink" title="Apigee Edge"></a>Apigee Edge</h2><ul>
<li>A platform for making APIs available to your customers and partners</li>
<li>Contains analytics, monetization, and a developer portal<br>The backend services for Apigee need not to be in GCP</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sdmj45.github.io/blog/2020/05/08/a06-GCP-Applications/" data-id="cl8yi9ib8001l94i4fzab7wr2" data-title="a06-GCP-Applications" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-a05-GCP-Containers" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2020/05/08/a05-GCP-Containers/" class="article-date">
  <time class="dt-published" datetime="2020-05-08T12:17:44.000Z" itemprop="datePublished">2020-05-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/gcp/">gcp</a>►<a class="article-category-link" href="/blog/categories/gcp/a-core-infrastructure/">a-core-infrastructure</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2020/05/08/a05-GCP-Containers/">a05-GCP-Containers</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Kubernetes"><a href="#Kubernetes" class="headerlink" title="Kubernetes"></a>Kubernetes</h2><p>orchestrator for containers so you can better manage and scale your applications</p>
<h2 id="Kubernetes-Engine"><a href="#Kubernetes-Engine" class="headerlink" title="Kubernetes Engine"></a>Kubernetes Engine</h2><p>Kubernetes as a managed service in the cloud. </p>
<p>You can create Kubernetes Cluster with Kubernetes Engine</p>
<h2 id="Cluster"><a href="#Cluster" class="headerlink" title="Cluster"></a>Cluster</h2><p>is a set of master components that control the system as a whole and a set of nodes that run containers<br>In Kubernetes, a node represents a computing instance<br>In GCP, a node is VM running in Compute Engine</p>
<h2 id="Pod"><a href="#Pod" class="headerlink" title="Pod"></a>Pod</h2><p>the smallest deployable unit in Kubernetes. It has 1 container often, but it could have multiple containers, where the containers<br>will share the networking and have the same disk storage volume</p>
<h2 id="Deployment"><a href="#Deployment" class="headerlink" title="Deployment"></a>Deployment</h2><p>a deployment represents a group a replicas of the same pod. It keeps your pods running even if a node fails</p>
<h2 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h2><p>is a fundamental way Kubernetes represents load balancing. It has a public IP so the external can access the cluster</p>
<p>In GKE, this kind of load balancer is a network load balancer</p>
<h2 id="Anthos"><a href="#Anthos" class="headerlink" title="Anthos"></a>Anthos</h2><p>Hybrid and Multi-Cloud distributed systems and service management from Google. It rests on Kubernetes and Kubernetes Engine deployed on-premise</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sdmj45.github.io/blog/2020/05/08/a05-GCP-Containers/" data-id="cl8yi9ib8001j94i4gdx8ddhi" data-title="a05-GCP-Containers" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-a04-GCP-Storage" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2020/05/06/a04-GCP-Storage/" class="article-date">
  <time class="dt-published" datetime="2020-05-06T15:30:14.000Z" itemprop="datePublished">2020-05-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/gcp/">gcp</a>►<a class="article-category-link" href="/blog/categories/gcp/a-core-infrastructure/">a-core-infrastructure</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2020/05/06/a04-GCP-Storage/">a04-GCP-Storage</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Cloud-Storage"><a href="#Cloud-Storage" class="headerlink" title="Cloud Storage"></a>Cloud Storage</h2><p>It is <strong>binary large-object storage</strong>(you have a storage and have a unique key to access) which is not the same as<br><strong>file storage</strong>(you manage your data as a hierarchy of folders) or<br><strong>block storage</strong>(the operating system manage data as chunks of disk)</p>
<p>Cloud storage works well with web technologies and is scalable</p>
<p>Each of objects in Cloud Storage has a URL and is immutable</p>
<p>Usage:</p>
<ul>
<li>serving website content</li>
<li>storing data for archival and disaster recovery</li>
<li>distributing large data objects to your end users via Direct Download</li>
</ul>
<p>For most case, IAM is sufficient, but if you need <strong>finer</strong> control, you can create ACLs(access control lists).<br>Each ACL consists of:</p>
<ul>
<li>scope: a user or group</li>
<li>permission: read or write</li>
</ul>
<h3 id="Object-Versioning"><a href="#Object-Versioning" class="headerlink" title="Object Versioning"></a>Object Versioning</h3><p>Cloud Storage keeps a history of modification, you can list the archived versions of an object, restore or delete it</p>
<p>It is not available on cloud console, you can change it via the command line<br>NB: after enabling of versioning, adding several versions of the object, when disable the versioning, the different versions<br><strong>always exist</strong> in the bucket, you should delete them <strong>manually</strong>.</p>
<h3 id="lifecycle"><a href="#lifecycle" class="headerlink" title="lifecycle"></a>lifecycle</h3><p>Cloud Storage offers <strong>lifecycle management policies</strong>, eg: you could delete objects older than 5 days</p>
<p>Cloud Storage has different types of storage classes: Multi-Regional, Regional, Nearline, Coldline</p>
<img src="/blog/2020/05/06/a04-GCP-Storage/cloud_storage_classes.png" class="" title="cloud_storage_classes">

<p>3 Ways to bring data into Cloud Storage:</p>
<ul>
<li>Online Transfer</li>
<li>Storage Transfer Service (online)</li>
<li>Transfer Appliance (offline)</li>
</ul>
<h2 id="Cloud-Bigtable"><a href="#Cloud-Bigtable" class="headerlink" title="Cloud Bigtable"></a>Cloud Bigtable</h2><p>It is google’s NoSQL, big data database service. It supports high throughput, both read and write.</p>
<p>It offers same API as HBase(native database for Apache Hadoop), differences:</p>
<ul>
<li>Bigtable can scale and manage fast and easily</li>
<li>Bigtable encrypts data in-flight and at rest</li>
<li>Bigtable can be controlled access with IAM</li>
<li>Bigtable drives major applications such as Google Analytics, Gmail</li>
</ul>
<p>Bigtable access patterns:</p>
<ul>
<li>application api</li>
<li>streaming</li>
<li>batch processing</li>
</ul>
<h2 id="Cloud-SQL"><a href="#Cloud-SQL" class="headerlink" title="Cloud SQL"></a>Cloud SQL</h2><p>managed RDBMS</p>
<ul>
<li>MySQL and PostgreSQL databases</li>
<li>Automatic replication</li>
<li>Managed backups</li>
<li>Vertical scaling(read and write)</li>
<li>Horizontal scaling(read)</li>
<li>Google security</li>
</ul>
<h2 id="Cloud-Spanner"><a href="#Cloud-Spanner" class="headerlink" title="Cloud Spanner"></a>Cloud Spanner</h2><p>horizontally scalable RDBMS</p>
<ul>
<li>Strong global consistency</li>
<li>High availability</li>
<li>SQL queries</li>
<li>Automatic replication</li>
</ul>
<h2 id="Cloud-Datastore"><a href="#Cloud-Datastore" class="headerlink" title="Cloud Datastore"></a>Cloud Datastore</h2><p>horizontally scalable NoSQL DB</p>
<ul>
<li>Designed for application backend</li>
<li>Supports transactions</li>
<li>includes a free daily quota</li>
</ul>
<h2 id="Cloud-Storage-Comparing"><a href="#Cloud-Storage-Comparing" class="headerlink" title="Cloud Storage Comparing"></a>Cloud Storage Comparing</h2><img src="/blog/2020/05/06/a04-GCP-Storage/cloud_storage_comparing_1.png" class="" title="cloud_storage_comparing_1">
<img src="/blog/2020/05/06/a04-GCP-Storage/cloud_storage_comparing_2.png" class="" title="cloud_storage_comparing_2">

















      
    </div>
    <footer class="article-footer">
      <a data-url="https://sdmj45.github.io/blog/2020/05/06/a04-GCP-Storage/" data-id="cl8yi9ib6001g94i4cpve4zr4" data-title="a04-GCP-Storage" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-a03-GCP-Virtual-Machines" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2020/05/06/a03-GCP-Virtual-Machines/" class="article-date">
  <time class="dt-published" datetime="2020-05-06T11:41:07.000Z" itemprop="datePublished">2020-05-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/gcp/">gcp</a>►<a class="article-category-link" href="/blog/categories/gcp/a-core-infrastructure/">a-core-infrastructure</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2020/05/06/a03-GCP-Virtual-Machines/">a03-GCP-Virtual-Machines</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>We can run virtual machines by using of Compute Engine</p>
<h2 id="VPC-Network"><a href="#VPC-Network" class="headerlink" title="VPC Network"></a>VPC Network</h2><p>Virtual Private Cloud: it connects your GCP resources to each other and to the internet.</p>
<p>Google Cloud VPC networks are global, but the subnets are regional</p>
<p>In the example below, us-east1-b and us-east1-c are on the same subnet but in different zones</p>
<img src="/blog/2020/05/06/a03-GCP-Virtual-Machines/subnet.png" class="" title="subnet">

<p>VPCs have routing tables, you can define firewall rules in terms of tags on compute engine.</p>
<p>VPC Peering: establish a peering relationship between projects<br>Shared VPC:  you can use IAM to control</p>
<h2 id="Cloud-Load-Balancing"><a href="#Cloud-Load-Balancing" class="headerlink" title="Cloud Load Balancing"></a>Cloud Load Balancing</h2><p>Users get a single, global anycast IP address</p>
<h2 id="Cloud-CDN-Content-Delivery-Network"><a href="#Cloud-CDN-Content-Delivery-Network" class="headerlink" title="Cloud CDN(Content Delivery Network)"></a>Cloud CDN(Content Delivery Network)</h2><p>Use Google’s globally distributed edge caches to cache content close to your users</p>
<h2 id="Compute-Engine"><a href="#Compute-Engine" class="headerlink" title="Compute Engine"></a>Compute Engine</h2><p>Create virtual machine by using of: </p>
<ul>
<li>GCP Console</li>
<li>gcloud</li>
</ul>
<p>You can run images of linux or windows servers.</p>
<p>You can configure memories and cpus of each VM, you can choose 2 kinds of storage: standard or SSD</p>
<p>You can choose a Preemptible VM to save money (the instance will terminate after 24 hours, it can be used for applications<br>distribute processes across multiple instances in a cluster or for test)</p>
<ul>
<li><p>Scale up:<br>  use big VMs for memory and compute-intensive applications</p>
</li>
<li><p>Scale out:<br>  Use <strong>Autoscaling</strong> for resilient, scalable applications</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sdmj45.github.io/blog/2020/05/06/a03-GCP-Virtual-Machines/" data-id="cl8yi9ib6001f94i4gx4qgyxo" data-title="a03-GCP-Virtual-Machines" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-spark-cross-join" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2020/05/06/spark-cross-join/" class="article-date">
  <time class="dt-published" datetime="2020-05-06T06:57:42.000Z" itemprop="datePublished">2020-05-06</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/spark/">spark</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2020/05/06/spark-cross-join/">spark cross join</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>&#x2F;&#x2F;todo: to complete</p>
<p>Cross join matches every row from left with every row from right, generating a Cartesian cross product.</p>
<p>val joinDF&#x3D;statesPopulationDF.crossJoin(statesTaxRatesDF)</p>
<p>without using a join condition.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sdmj45.github.io/blog/2020/05/06/spark-cross-join/" data-id="cl8yi9ibr002f94i490miec3z" data-title="spark cross join" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-a02-Getting-Started-With-GCP" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2020/05/03/a02-Getting-Started-With-GCP/" class="article-date">
  <time class="dt-published" datetime="2020-05-03T12:53:10.000Z" itemprop="datePublished">2020-05-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/gcp/">gcp</a>►<a class="article-category-link" href="/blog/categories/gcp/a-core-infrastructure/">a-core-infrastructure</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2020/05/03/a02-Getting-Started-With-GCP/">a02-Getting-Started-With-GCP</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="IAM"><a href="#IAM" class="headerlink" title="IAM"></a>IAM</h2><p>IAM: Google Cloud’s Identity and Access Management.<br>It has 3 parts:</p>
<ul>
<li><strong>Who</strong>:<br>  can be defined by google account, google group, service account</li>
<li><strong>Can do what</strong>: can be defined by an <strong>IAM role</strong> which is a collection of permissions<ul>
<li>There are 3 kinds of roles:<ul>
<li>Primitive role</li>
<li>Predefined role</li>
<li>Custom role:  can only be defined in organization or project, but not in folders</li>
</ul>
</li>
</ul>
</li>
<li><strong>On which resource</strong></li>
</ul>
<h2 id="GCP-resource-hierarchy"><a href="#GCP-resource-hierarchy" class="headerlink" title="GCP resource hierarchy"></a>GCP resource hierarchy</h2><p>polices can define in organization, folder, project, they are inherited in the hierarchy.</p>
<img src="/blog/2020/05/03/a02-Getting-Started-With-GCP/resources_hierarchy.png" class="" title="resources_hierarchy">

<p><strong>Projects</strong> are the main way you organise your gcp resources.</p>
<p>Each project has </p>
<ul>
<li>Project ID: immutable (assigned by you)</li>
<li>Project Name: mutable (assigned by you)</li>
<li>Project number: immutable (assigned by GCP)</li>
</ul>
<p>Policies defined in organisation level can be inherited to all children.</p>
<p>GCP use <strong>least</strong> privilege in managing any kind of compute infrastructure. </p>
<p><strong>The policies implemented at a higher level in this hierarchy can’t take away access that’s granted at a lower level</strong><br>Eg: if you grant Editor role to Organisation and Viewer role to the folder, then the folder is granted the Editor role.</p>
<p>Projects can have different owners and users - they are built separately and managed separately.</p>
<h2 id="Service-Account"><a href="#Service-Account" class="headerlink" title="Service Account"></a>Service Account</h2><p>For example: If you want to give permissions to a Compute Engine rather than a person, you would use service account.<br>A service account is also a resource, so you can give a role to it.</p>
<p>There are 4 ways to interact with GCP’s management layer:</p>
<ul>
<li>GCP console<ul>
<li>Manage and create projects</li>
<li>Access to GCP APIs</li>
<li>Offers access to Cloud Shell</li>
</ul>
</li>
<li>Cloud shell and Cloud SDK<ul>
<li>Includes command line tools: gcloud, gsutil(Cloud storage), bq(BigQuery)</li>
</ul>
</li>
<li>API<ul>
<li>Enabled through GCP console</li>
<li><strong>APIs Explorer</strong> is an interface tool that let you easily try GCP APIs using a browser</li>
<li>Use libraries within your code<ul>
<li>Cloud Client Libraries<br>(<strong>Latest and recommended libraries</strong>)</li>
<li>Google API Client Libraries</li>
</ul>
</li>
</ul>
</li>
<li>Cloud Console Mobile App</li>
</ul>
<p>When using GCP, it handles most of the lower security layer, the upper layers remain the customer’s responsibility </p>
<img src="/blog/2020/05/03/a02-Getting-Started-With-GCP/cloud_security.png" class="" title="cloud_security">

<h2 id="Cloud-MarketPlace-formerly-Cloud-Launcher"><a href="#Cloud-MarketPlace-formerly-Cloud-Launcher" class="headerlink" title="Cloud MarketPlace( formerly Cloud Launcher)"></a>Cloud MarketPlace( formerly Cloud Launcher)</h2><p>It’s a tool for quickly deploying functional software packages on GCP</p>
<div class="video-container"><iframe src="https://www.youtube.com/embed/WVwEVeW4A64" frameborder="0" loading="lazy" allowfullscreen></iframe></div>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://sdmj45.github.io/blog/2020/05/03/a02-Getting-Started-With-GCP/" data-id="cl8yi9ib5001d94i4gq4ub9sl" data-title="a02-Getting-Started-With-GCP" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-a01-GCP-introduction" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2020/05/01/a01-GCP-introduction/" class="article-date">
  <time class="dt-published" datetime="2020-05-01T13:37:46.000Z" itemprop="datePublished">2020-05-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/gcp/">gcp</a>►<a class="article-category-link" href="/blog/categories/gcp/a-core-infrastructure/">a-core-infrastructure</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2020/05/01/a01-GCP-introduction/">a01-GCP-introduction</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="What-is-GCP"><a href="#What-is-GCP" class="headerlink" title="What is GCP ?"></a>What is GCP ?</h1><p>GCP stands for Google Cloud Platform which is a suite of public cloud computing services offered by Google. It offers 4 main kinds of services: compute, storage, big data, machine learning that run on Google hardware.</p>
<h2 id="what-is-cloud-computing"><a href="#what-is-cloud-computing" class="headerlink" title="what is cloud computing ?"></a>what is cloud computing ?</h2><ul>
<li><strong>On-demand self-service</strong>: use interface to get processing, no human intervention needed</li>
<li><strong>Broad network access</strong>: access from anywhere</li>
<li><strong>Resource pooling</strong>: provider shares resources to customers</li>
<li><strong>Rapid elasticity</strong>: get more resources quickly as needed</li>
<li><strong>Measured service</strong>: pay only for what you consume</li>
</ul>
<h2 id="compute-evolution"><a href="#compute-evolution" class="headerlink" title="compute evolution"></a>compute evolution</h2><ol>
<li><strong>Physical&#x2F;colo</strong>: user-configured, managed and maintained</li>
<li><strong>Virtualized</strong>: user-configured; provider-managed and maintained</li>
<li><strong>Serverless</strong>: container based architecture, fully automated</li>
</ol>
<h2 id="gcp-computing-architectures"><a href="#gcp-computing-architectures" class="headerlink" title="gcp computing architectures"></a>gcp computing architectures</h2><ul>
<li><strong>IaaS</strong>: Infrastructure as a Service<ul>
<li>provides raw compute, storage and network organized in ways that are like from data centers</li>
</ul>
</li>
<li><strong>PaaS</strong>: Platform as a Service<ul>
<li>provides a platform allowing customers to develop, run and manage applications without maintaining infrastructure</li>
</ul>
</li>
<li><strong>SaaS</strong>: Software as a Service<ul>
<li>software is licensed on a subscription basis and is centrally hosted<img src="/blog/2020/05/01/a01-GCP-introduction/gcp_computing_architectures.png" class="" title="gcp_computing_architectures"></li>
</ul>
</li>
</ul>
<h2 id="regions-and-zones"><a href="#regions-and-zones" class="headerlink" title="regions and zones"></a>regions and zones</h2><p>GCP is organized into regions and zones. <strong>Zone</strong> is department area for GCP resources. For example, the compute engine runs in a zone specified.</p>
<p>Locations within regions usually have network latencies of under 5 milliseconds</p>
<p>As of building a fault tolerant application, you can spread their resources across multiple regions</p>
<img src="/blog/2020/05/01/a01-GCP-introduction/regions_and_zones.png" class="" title="regions_and_zones">

<h2 id="open-apis"><a href="#open-apis" class="headerlink" title="open apis"></a>open apis</h2><p>GCP services are compatible with open sources products. for example:</p>
<ul>
<li>Cloud Bigtable &lt;&#x3D;&#x3D;&gt; Apache HBase</li>
<li>Cloud Dataproc &lt;&#x3D;&#x3D;&gt; Hadoop</li>
</ul>
<h2 id="gcp-services"><a href="#gcp-services" class="headerlink" title="gcp services"></a>gcp services</h2><p>GCP offers services as compute, storage, big data and machine learning</p>
<img src="/blog/2020/05/01/a01-GCP-introduction/gcp_services.png" class="" title="gcp_services">

<h2 id="budgets-and-billing"><a href="#budgets-and-billing" class="headerlink" title="budgets and billing"></a>budgets and billing</h2><p>GCP provides 4 tools to help: </p>
<p><strong>budgets and alert</strong>: define budget per billing or per project, you can create an alert at 50 percent, 90 percent and 100 percent</p>
<p><strong>billing</strong>: you have billing account on GCP project</p>
<p><strong>export</strong>: store detailed billing information</p>
<p><strong>reports and quotas</strong>: </p>
<ul>
<li>report is a visual tool to monitor your expenditure. </li>
<li>quotas are designed to prevent over-consumption of resources<ul>
<li>rate quotas<br>  reset after a specific time. eg: Kubernetes service set a quota of 1000 calls per 100 seconds</li>
<li>allocation quotas<br>  govern the number of resources you can have in your projects. eg: no more than 5 VPN per project</li>
</ul>
</li>
</ul>
<div class="video-container"><iframe src="https://www.youtube.com/embed/SKCLJhDb-gc" frameborder="0" loading="lazy" allowfullscreen></iframe></div>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://sdmj45.github.io/blog/2020/05/01/a01-GCP-introduction/" data-id="cl8yi9ib5001c94i46pkv3nim" data-title="a01-GCP-introduction" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-spark-listeners" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2019/05/17/spark-listeners/" class="article-date">
  <time class="dt-published" datetime="2019-05-17T14:21:43.000Z" itemprop="datePublished">2019-05-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/spark/">spark</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2019/05/17/spark-listeners/">spark listeners</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>When running spark job, driver collects logs from different executors and send events via an event bus to Web UI and to EventLog Listener simultaneously.</p>
<p>EventLog Listener send events to a some directory for example in hdfs to store the events, and then spark history server will expose these events in its interface.</p>
<p>We could define our custom EventLog Listener, there are several listeners already developed and we can use them directly, here I will prent 3 examples.</p>
<img src="/blog/2019/05/17/spark-listeners/spark_history-min.png" class="" title="spark history">



<h2 id="sparklens"><a href="#sparklens" class="headerlink" title="sparklens"></a>sparklens</h2><p><a target="_blank" rel="noopener" href="https://github.com/qubole/sparklens">Sparklens</a> is a profiling tool for Spark with built-in Spark Scheduler simulator, it reports </p>
<ul>
<li><p>Estimated completion time and estimated cluster utilisation with different number of executors</p>
</li>
<li><p>Job&#x2F;Stage timeline which shows how the parallel stages were scheduled within a job. This makes it easy to visualise the DAG with stage dependencies at the job level.</p>
</li>
</ul>
<p>Here is a screen capture of sparklens reporting ( in my example, I added sparklens jar in the classpath of zepplin, and import sparklens package, and then I can use sparklens directly)</p>
<p>import package</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> com.qubole.sparklens.<span class="type">QuboleNotebookListener</span></span><br><span class="line"><span class="keyword">val</span> <span class="type">QNL</span> = <span class="keyword">new</span> <span class="type">QuboleNotebookListener</span>(sc.getConf)</span><br><span class="line">sc.addSparkListener(<span class="type">QNL</span>)</span><br></pre></td></tr></table></figure>

<img src="/blog/2019/05/17/spark-listeners/sparklens-min.png" class="" title="sparklens">




<h2 id="sparklint"><a href="#sparklint" class="headerlink" title="sparklint"></a>sparklint</h2><p><a target="_blank" rel="noopener" href="https://github.com/groupon/sparklint">Sparklint</a> is a profiling tool for Spark with advance metrics and better visualization about your spark application’s resource utilization. It helps you find out where the bottle neck are</p>
<p>We can use it in the application code, or we can also use it to analyse event logs, at the moment when I write this blog, the actual version of sparklint is 1.0.13, and we can’t analyse event logs of history server yet if it is compressed in the configuration.<br>But we can decompress it to json file and then we can work on it.</p>
<p>here is a screen capture of sparklint</p>



<h2 id="sparkMeasure"><a href="#sparkMeasure" class="headerlink" title="sparkMeasure"></a>sparkMeasure</h2><p><a target="_blank" rel="noopener" href="https://github.com/LucaCanali/sparkMeasure">sparkMeasure</a> is a tool for performance troubleshooting of Apache Spark workloads, It simplifies the collection and analysis of Spark performance metrics.</p>
<p>It is a tool for multiple uses: instrument interactive (notebooks) and batch workloads</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sdmj45.github.io/blog/2019/05/17/spark-listeners/" data-id="cl8yi9ibs002g94i47saf06cn" data-title="spark listeners" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Hive-vs-Presto" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/blog/2019/05/13/Hive-vs-Presto/" class="article-date">
  <time class="dt-published" datetime="2019-05-13T13:53:41.000Z" itemprop="datePublished">2019-05-13</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/big-data/">big data</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/blog/2019/05/13/Hive-vs-Presto/">Hive vs Presto</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Presto"><a href="#Presto" class="headerlink" title="Presto"></a>Presto</h1><p>Presto is a distributed SQL query engine for big data, it allows users to query a variety of data sources such as Hadoop, RDBMS, Mongo etc. One can even query data from multiple data sources within a single query.</p>
<h1 id="Hive"><a href="#Hive" class="headerlink" title="Hive"></a>Hive</h1><p>Hive is a data warehouse software built on top of Apache Hadoop for providing data query and analysis. It translates SQL queries into multiple stages of MapReduce and it is powerful enough to handle huge numbers of jobs</p>
<h1 id="Comparisons"><a href="#Comparisons" class="headerlink" title="Comparisons"></a>Comparisons</h1><table>
<thead>
<tr>
<th>Tables</th>
<th align="center">Presto</th>
<th align="right">Hive</th>
</tr>
</thead>
<tbody><tr>
<td>best of use</td>
<td align="center">Interactive queries</td>
<td align="right">Large data aggregation(join for example)</td>
</tr>
<tr>
<td>sql standardized fidelity</td>
<td align="center">ANSI SQL</td>
<td align="right">HiveQL</td>
</tr>
<tr>
<td>window function</td>
<td align="center">yes</td>
<td align="right">yes</td>
</tr>
<tr>
<td>optimized target</td>
<td align="center">latency</td>
<td align="right">query throughput</td>
</tr>
<tr>
<td>execution mode</td>
<td align="center">Intermediate data in memory</td>
<td align="right">Spills intermediate data to File System</td>
</tr>
<tr>
<td>fault tolerance</td>
<td align="center">No</td>
<td align="right">Yes</td>
</tr>
<tr>
<td>speed</td>
<td align="center">2 times faster than hive</td>
<td align="right">slow</td>
</tr>
<tr>
<td>data processing models</td>
<td align="center">push model</td>
<td align="right">pull model</td>
</tr>
<tr>
<td>limitation</td>
<td align="center">limited at the maximum amount of memory that each task can store</td>
<td align="right"></td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://sdmj45.github.io/blog/2019/05/13/Hive-vs-Presto/" data-id="cl8yi9iaf000594i45eks8pvp" data-title="Hive vs Presto" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/blog/page/4/">&laquo; Prev</a><a class="page-number" href="/blog/">1</a><span class="space">&hellip;</span><a class="page-number" href="/blog/page/3/">3</a><a class="page-number" href="/blog/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/blog/page/6/">6</a><a class="extend next" rel="next" href="/blog/page/6/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/big-data/">big data</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/ci-cd/">ci/cd</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/devops/">devops</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/devops/kubernetes/">kubernetes</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/devops/terraform/">terraform</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/feelings/">feelings</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/gcp/">gcp</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/gcp/a-core-infrastructure/">a-core-infrastructure</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/gcp/b-data-engineer/">b-data-engineer</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/gcp/c-data-architect/">c-data-architect</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/gcp/c-data-architect/infrastructure-foundation/">infrastructure-foundation</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/gcp/d-practice/">d-practice</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/gcp/kubernetes/">kubernetes</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/git/">git</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/git/commands/">commands</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/python/">python</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/python/a-basics/">a-basics</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/python/b-OOP/">b-OOP</a></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/python/c-pandas/">c-pandas</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/spark/">spark</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/spark/" rel="tag">spark</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/blog/tags/spark/" style="font-size: 10px;">spark</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/10/">October 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2022/09/">September 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2020/10/">October 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2020/06/">June 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/04/">April 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2019/03/">March 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/blog/2022/10/07/Python-c04-indexes/">Python-c04-indexes</a>
          </li>
        
          <li>
            <a href="/blog/2022/10/07/Python-c03-DataFrame-and-Series/">Python-c03-DataFrame and Series</a>
          </li>
        
          <li>
            <a href="/blog/2022/10/06/Python-c02-Getting-Started-with-Pandas/">Python-c02-Getting Started with Pandas</a>
          </li>
        
          <li>
            <a href="/blog/2022/10/06/Python-c01-Jupyter/">Python-c01-Jupyter</a>
          </li>
        
          <li>
            <a href="/blog/2022/09/16/xiaomakuaibao/">Website Recommended</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 MA Jian<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/blog/js/jquery-3.4.1.min.js"></script>



  
<script src="/blog/fancybox/jquery.fancybox.min.js"></script>




<script src="/blog/js/script.js"></script>





  </div>
</body>
</html>